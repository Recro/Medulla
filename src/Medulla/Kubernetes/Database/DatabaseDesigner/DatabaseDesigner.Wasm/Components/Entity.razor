@{
    string inTrayHover = (InTray ? "cursor:pointer;": "");

}
<div @onclick="@Clicked" data-color-mode="dark" class="position-relative border rounded-0 p-2 mb-2 color-bg-default box card" style="width: 115px;height: 115px; @inTrayHover">
    <div class="box-header card-header">
        <h4 class="mb-0" style="font-size: 10px;color: gainsboro;">@Name</h4>
        @if (!InTray) 
        {
            @if (SettingsOn) 
            {
                <div style="height: 0;position: absolute;top: -115px;left: 118px;width:232px;" class="position-relative text-center">
                    <div class="Popover position-relative">
                        <div class="Popover-message Popover-message--left p-4 mx-auto mb-2 text-left Box color-shadow-large">
                        <h4 class="mb-2">@SettingsTitle</h4>
                        
                        @SettingsForm

                        <button @onclick="() => SettingsOn = !SettingsOn" type="submit" class="btn btn-outline mt-2 text-bold">Got it!</button>
                        </div>
                    </div>

                    @if (IsLoading) {
                        @* #8250df *@
                        <div style="color: purple;
                            position: relative;
                            bottom: 0;
                            transform: scale(.5);
                            right: -98px;
                            bottom: 40px;
                            z-index: 10000;" class="loader loader--style5" title="4">
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                            width="24px" height="30px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve">
                            <rect x="0" y="0" width="4" height="20" fill="#8250df">
                            <animate attributeName="opacity" attributeType="XML"
                                values="1; .2; 1" 
                                begin="0s" dur="0.6s" repeatCount="indefinite" />
                            </rect>
                            <rect x="7" y="0" width="4" height="20" fill="#8250df">
                            <animate attributeName="opacity" attributeType="XML"
                                values="1; .2; 1" 
                                begin="0.2s" dur="0.6s" repeatCount="indefinite" />
                            </rect>
                            <rect x="14" y="0" width="4" height="20" fill="#8250df">
                            <animate attributeName="opacity" attributeType="XML"
                                values="1; .2; 1" 
                                begin="0.4s" dur="0.6s" repeatCount="indefinite" />
                            </rect>
                        </svg>
                        </div>
                    }
                    

                </div>
            }
            <img @onclick="() => SettingsOn = !SettingsOn" class="settings-icon" style="position: absolute;top: 0;width: 40px;right: 0;" src="https://static.vecteezy.com/system/resources/thumbnails/004/154/528/small/setting-icon-design-sign-gear-isolated-sign-free-free-vector.jpg" />
        }
    </div>

    <div class="position-relative text-center" style="position: absolute!important;left: 0;right: 0;">
    <img style="margin: 5%;width: 49%;" src="@Image" />
    </div>

    @if (!InTray) 
    {
        @NodePorts
    }
</div>
