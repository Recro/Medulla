name: Medulla
registry: ghcr.io/recro/medulla
namespace: medulla-system
network: medulla

ingress:
  - name: medulla
    bindings:
      - name: http
        port: 80
        protocol: http
      - name: https
        port: 443
        protocol: https
    rules:
      - service: client
        path: /
      - service: documentation
        path: /docs
        preservePath: true
      - service: identity
        path: /identity
        preservePath: true

services:
  - name: client
    project: Client/Server/Medulla.Client.Server.csproj
    replicas: 1
    bindings:
      - name: http
        protocol: http

  - name: documentation
    project: Documentation/Server/Medulla.Documentation.Server.csproj
    replicas: 1
    bindings:
      - name: http
        protocol: http

  - name: identity
    project: Services/Identity/Medulla.Services.Identity.csproj
    replicas: 1
    bindings:
      - name: http
        protocol: http
